{% extends 'base.html' %}
{% load static %}

{% block title %}US Passport Photo Editor{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-4 max-w-lg bg-white bg-opacity-50 rounded-lg shadow-sm border border-border mt-8">
    <!-- 标题和说明 -->
    <div class="text-center mb-6 bg-white bg-opacity-50 rounded-lg shadow-sm p-4">
        <h1 class="text-2xl font-bold text-text-primary">US Passport Photo</h1>
        <p class="text-text-secondary mt-2">2×2 inch (51×51 mm)</p>
    </div>

    <!-- 上传区域 -->
    <div class="bg-white bg-opacity-50 rounded-lg shadow-sm mb-6">
        <div id="uploadArea" class="p-8 text-center">
            <form action="{% url 'photo_crop:upload' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <button id="uploadButton" type="button"
                        class="w-full bg-secondary hover:bg-background-dark text-white py-4 rounded-lg text-lg">
                    <i class="fas fa-upload mr-2"></i> Upload Photo
                </button>
                <input type="file" id="fileInput" name="photo" accept="image/*" class="hidden">
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadButton = document.getElementById('uploadButton');
    const fileInput = document.getElementById('fileInput');
    const form = document.querySelector('form');

    uploadButton.addEventListener('click', function(e) {
        e.preventDefault();
        fileInput.click();
    });

    fileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
            // 禁用按钮防止重复提交
            uploadButton.disabled = true;
            uploadButton.textContent = 'Uploading...';
            
            // 提交表单
            form.submit();
        }
    });
});
</script>
{% endblock %}
